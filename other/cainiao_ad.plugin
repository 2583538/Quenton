#!name=èœé¸Ÿè£¹è£¹
#!desc=èœé¸Ÿè£¹è£¹
#!author=å¥¶æ€, fmz200, Rucu6
#!icon=https://gitlab.com/lodepuly/iconlibrary/-/raw/main/App_icon/120px/Cainiao.png
#!homepage=https://github.com/fmz200/wool_scripts
#!raw-url= https://raw.githubusercontent.com/2583538/Quenton/refs/heads/main/other/ad.plugin #!tg-group=https://t.me/lanjieguanggao
#!system=iOS, iPadOS
#!system_version = 
#!loon_version = 
#!date=2024-10-24 18:15
#!remark=ä¸‹æ–¹çš„æ‰€æœ‰è§„åˆ™éƒ½æ ‡æ³¨äº†å¯¹åº”çš„hostnameï¼Œå¯èƒ½å­˜åœ¨é”™è¯¯æˆ–è€…é—æ¼ï¼Œæ¬¢è¿åé¦ˆã€‚å¯¹äºæ— æ³•/å¯é€‰MITMçš„hostnameéƒ½ç‰¹åˆ«åšäº†â€œå¦‚å¼€å¯å¯è‡ªè¡Œæ·»åŠ ä¸»æœºåâ€æç¤ºï¼Œå¦‚æœæç¤ºåé¢æ²¡æœ‰æ ‡æ³¨ä¸»æœºååˆ™åŒ…å«æ‰€æœ‰ä¸»æœºåï¼Œå¦åˆ™åªåŒ…å«æç¤ºè¯­åé¢çš„ä¸»æœºåã€‚
#############################################
# "reject"        ç­–ç•¥è¿”å› HTTP çŠ¶æ€ç  404,ä¸é™„å¸¦ä»»ä½•é¢å¤–å†…å®¹
# "reject-200"    ç­–ç•¥è¿”å› HTTP çŠ¶æ€ç  200,ä¸é™„å¸¦ä»»ä½•é¢å¤–å†…å®¹
# "reject-img"    ç­–ç•¥è¿”å› HTTP çŠ¶æ€ç  200,åŒæ—¶é™„å¸¦ 1px gif
# "reject-dict"   ç­–ç•¥è¿”å› HTTP çŠ¶æ€ç  200,åŒæ—¶é™„å¸¦ä¸€ä¸ªç©ºçš„ JSON å¯¹è±¡
# "reject-array"  ç­–ç•¥è¿”å› HTTP çŠ¶æ€ç  200,åŒæ—¶é™„å¸¦ä¸€ä¸ªç©ºçš„ JSON æ•°ç»„
#############################################
# å¸¸è§é—®é¢˜ï¼š
# 1ï¸âƒ£ï¼šæˆ‘çŸ¥é“è§„åˆ™ï¼Œä¸çŸ¥é“ä¸»æœºåæ€ä¹ˆåŠï¼Ÿ
# âœ…ï¼šå‡ ä¹æ‰€æœ‰çš„ä¸»æœºåéƒ½æ˜¯ä»è§„åˆ™ä¸­æå–å‡ºæ¥çš„ï¼Œå…ˆæœ‰çš„è§„åˆ™å†æœ‰çš„ä¸»æœºå
# ä¸¾ä¸ªæ —å­ï¼š12306çš„ä¸€æ¡è§„åˆ™URLğŸ‘‰ğŸ»^https?:\/\/ad\.12306\.cn\/ad\/ser\/getAdList
# åªéœ€è¦å»æ‰åæ–œæ ï¼š^https?://ad.12306.cn/ad/ser/getAdList
# ä¸ç”¨å†è¯´äº†å§ï¼Œad.12306.cnå°±æ˜¯æƒ³è¦çš„ä¸»æœºå
# 2ï¸âƒ£ï¼šæœ‰äº›å¸¸ç”¨çš„è½¯ä»¶ä¸ºä»€ä¹ˆæ²¡æœ‰å»å¹¿å‘Šé…ç½®ï¼Ÿ
# âœ…ï¼šå¦‚æœè¦åˆ©ç”¨é‡å†™å»å¹¿å‘Šï¼Œå°±éœ€è¦å¯¹è¯·æ±‚æˆ–å“åº”ä¿¡æ¯è¿›è¡Œè§£å¯†(MITM)ï¼Œç°åœ¨ä¸€äº›è½¯ä»¶å·²ç»ç¦æ­¢äº†MITMï¼Œæ‰€ä»¥å°±æ— æ³•å»å¹¿å‘Šã€‚
# 3ï¸âƒ£ï¼šLoonå¦‚æœåœ¨æ’ä»¶é‡Œé¢å†™äº†è§„åˆ™ï¼Œåœ¨è§„åˆ™é…ç½®é‡Œä¹Ÿå†™äº†ï¼Œå“ªä¸ªä¼˜å…ˆç”Ÿæ•ˆï¼Ÿ
# âœ…ï¼šæ’ä»¶é‡Œçš„è§„åˆ™ä¼˜å…ˆç”Ÿæ•ˆã€‚
#############################################

[Rewrite]
# åº•éƒ¨å‘ç°é¡µ - è§’æ ‡
^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.cainiao\.app\.home\.tabbar\.marketing\.get\.cn reject-dict

# é¦–é¡µ - å¥½ç‰©æ¨èã€å•†å“æ¨å¹¿ã€åº•éƒ¨æ ‡ç­¾é¡µã€å¿«é€’è¯¦æƒ…é¡µã€é—®å·è°ƒæŸ¥ã€ä¸»é¡µå›¾æ ‡
^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.cainiao\.adkeyword\.get\.cn reject-dict
^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.cainiao\.cncommunity\.my\.station\.query\.cn reject-dict
^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.cainiao\.guoguo\.nbnetflow\.ads\.(?:batch\.show\.v2|expose\.mreply|index)\.cn reject-dict
^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.cainiao\.nbopen\.miniapp\.recommend\.cpc\.cn reject-dict
^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.cainiao\.nbmensa\.research\.researchservice\.(?:acquire|event|close)\.cn reject-dict
^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.cainiao\.nbpresentation\.(?:homepage\.merge|tabbar\.marketing)\.get\.cn reject-dict

# å‘ç°é¡µ - æ•°å­—è§’æ ‡ã€è£¹è£¹åˆ¸
^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.com\.cainiao\.cnactivitycenter reject-dict
^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.com\.cainiao\.cncreditmarket\.hit\.getactivityhit\.cn reject-dict
^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.com\.cainiao\.longquan\.place\.getpageresourcecontent\.cn reject-dict

# æ”¯ä»˜å® - èœé¸Ÿå°ç¨‹åº
^https:\/\/guide-acs\.m\.taobao\.com\/gw\/mtop\.cainiao\.adx\.flyad\.getad reject-dict

[Script]

# æˆ‘çš„é¡µé¢
http-response ^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.cainiao\.app\.mine\.main\.cn script-path = https://raw.githubusercontent.com/2583538/Quenton/refs/heads/main/js/cainiao.js, requires-body = true, tag = ç§»é™¤æˆ‘çš„é¡µé¢æ¨å¹¿

# é¦–é¡µ - å¥½ç‰©æ¨èã€å•†å“æ¨å¹¿ã€åº•éƒ¨æ ‡ç­¾é¡µã€å¿«é€’è¯¦æƒ…é¡µã€é—®å·è°ƒæŸ¥ã€ä¸»é¡µå›¾æ ‡
http-response ^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.cainiao\.guoguo\.nbnetflow\.ads\.m?show\.cn script-path = https://raw.githubusercontent.com/2583538/Quenton/refs/heads/main/js/cainiao.js, requires-body = true, tag = ç§»é™¤é¦–é¡µæ¨å¹¿
http-response ^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.cainiao\.nbpresentation\.(?:pickup\.empty\.page|protocol\.homepage)\.get\.cn script-path = https://raw.githubusercontent.com/2583538/Quenton/refs/heads/main/js/cainiao.js, requires-body = true, tag = ç§»é™¤é¦–é¡µæ¨å¹¿

# æ¶ˆæ¯ä¸­å¿ƒ
http-response ^https:\/\/cn-acs\.m\.cainiao\.com\/gw\/mtop\.nbfriend\.message\.conversation\.list\.cn script-path = https://raw.githubusercontent.com/2583538/Quenton/refs/heads/main/js/cainiao.js, requires-body = true, tag = ç§»é™¤æ¶ˆæ¯ä¸­å¿ƒæ¨å¹¿

# æ”¯ä»˜å® - èœé¸Ÿå°ç¨‹åº
http-response ^https:\/\/guide-acs\.m\.taobao\.com\/gw\/mtop\.cainiao\.guoguo\.nbnetflow\.ads\.mshow script-path = https://raw.githubusercontent.com/2583538/Quenton/refs/heads/main/js/cainiao.js, requires-body = true, tag = ç§»é™¤èœé¸Ÿå°ç¨‹åºæ¨å¹¿

[MITM]
hostname = cn-acs.m.cainiao.com, guide-acs.m.taobao.com, 
